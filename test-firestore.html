// Test Firestore connection
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getFirestore, collection, getDocs, query, where } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

const firebaseConfig = {
    apiKey: "AIzaSyB_FrZNb1q2fPl8RI9mSIb8zKZzchOWOR8",
    authDomain: "undangan-zila.firebaseapp.com",
    projectId: "undangan-zila",
    storageBucket: "undangan-zila.firebasestorage.app",
    messagingSenderId: "663200651385",
    appId: "1:663200651385:web:26b9c700b32de7c27f1ca8"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

async function testFirestore() {
    try {
        console.log("Testing Firestore connection...");

        // Test read RSVP entries
        const q = query(collection(db, "entries"), where("type", "==", "rsvp"));
        const snapshot = await getDocs(q);

        console.log(`Found ${snapshot.size} RSVP entries`);

        // Test read all entries
        const qAll = query(collection(db, "entries"));
        const snapshotAll = await getDocs(qAll);

        console.log(`Found ${snapshotAll.size} total entries`);
        console.log("✅ Firestore read test successful!");

    } catch (error) {
        console.error("❌ Firestore test failed:", error);
        console.error("Error code:", error.code);
        console.error("Error message:", error.message);
    }
}

testFirestore();